
\documentclass[10pt]{article}  

% to prevent funny stuff happening with old packages (I think)
\usepackage{ifxetex}

% The declaration of the document class:

% The second line here, i.e.
% \documentclass[12pt]{scrartcl} 
% is a standard LaTeX document class declaration: 
% we say what kind of document we are making in curly brackets, 
% and specify any options in square brackets.

% (The previous line is a pseudo-comment, declaring that we will
% use the special XeTeX machinery for its more extensive font list
% and its use of unicode; 
% in general, LaTeX 'comments' like this one
%  begin with % and end with a linebreak.)

% Note that there we have nothing in the nature of a template;
% it's just a standard bit of LaTeX pandoc will copy unaltered into the 
% LaTeX file it is writing.  But suppose you wrote something
% more akin to the corresponding line in Pandoc's default 
% latex.template file, say:

% \documentclass$if(fontsize)$[$fontsize$]$endif${scrartcl}

% then you would have invented a 'variable', fontsize, 
% and could write things like 

% `markdown2pdf my.txt --xetex --variable=fontsize:12pt -o my.pdf` or
% `pandoc -r markdown -w html my.txt -s --xetex --variable=fontsize:24pt -o my.tex`. 

% If we specified --variable-fontsize:12, then template substitution
% would yield a LaTeX document beginning
% \documentclass[12pt]{scrarcl}
% which is just what we said anyway. 
% But we could also specify a different fontsize.

% -- We are in swanky unicode, XeTeX land, and must now import these packages:
\usepackage{fontspec,xltxtra,xunicode}
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\usepackage{fixltx2e}


% fontspec means we can specify pretty much any font.
% Because we are using XeTeX material,
% this template needs to be called with the `--xetex` flag. 

%%% color definitions %%%
\usepackage[usenames,dvipsnames,xetex]{xcolor}
% old cyan variants %
\definecolor{OldCyan}{RGB}{62,127,137}
\definecolor{OldCyan-Dark}{RGB}{38,104,113}
\definecolor{OldCyan-Light}{RGB}{86,156,166}
\definecolor{OldCyan-Matte}{RGB}{62,113,120}
\definecolor{OldCyan-MatteLight}{RGB}{95,158,166}
% light amber variants %
\definecolor{LightAmber}{RGB}{223,184,98}
\definecolor{LightAmber-Dark}{RGB}{184,145,61}
\definecolor{LightAmber-Light}{RGB}{231,195,118}
\definecolor{LightAmber-Matte}{RGB}{195,165,100}
\definecolor{LightAmber-MatteLight}{RGB}{231,199,131}
% salmon variants %
\definecolor{Salmon}{RGB}{223,107,98}
\definecolor{Salmon-Dark}{RGB}{184,70,61}
\definecolor{Salmon-Light}{RGB}{231,126,118}
\definecolor{Salmon-Matte}{RGB}{195,107,100}
\definecolor{Salmon-MatteLight}{RGB}{231,138,131}
\definecolor{Grey}{RGB}{88,88,88}
\definecolor{Grey-Light}{RGB}{129,129,129}
\definecolor{Grey-Dark}{RGB}{65,65,65}
% SOLARIZED
\definecolor{solarized@base03}{HTML}{002B36}
\definecolor{solarized@base02}{HTML}{073642}
\definecolor{solarized@base01}{HTML}{586e75}
\definecolor{solarized@base00}{HTML}{657b83}
\definecolor{solarized@base0}{HTML}{839496}
\definecolor{solarized@base1}{HTML}{93a1a1}
\definecolor{solarized@base2}{HTML}{EEE8D5}
\definecolor{solarized@base3}{HTML}{FDF6E3}
\definecolor{solarized@yellow}{HTML}{B58900}
\definecolor{solarized@orange}{HTML}{CB4B16}
\definecolor{solarized@red}{HTML}{DC322F}
\definecolor{solarized@magenta}{HTML}{D33682}
\definecolor{solarized@violet}{HTML}{6C71C4}
\definecolor{solarized@blue}{HTML}{268BD2}
\definecolor{solarized@cyan}{HTML}{2AA198}
\definecolor{solarized@green}{HTML}{859900}

% Symbols: 
% Pandoc imports the extensive `amsmath` collection of symbols 
% for typesetting ordinary math.  
\usepackage{amsmath}
% if you use exotic symbols you need to import specific packages, eg. for
% electrical engineering diagrams, musical notation, exotic currency symbols,
% the unspeakable rites of freemasonry etc.
\usepackage{unicode-math}

% `babel`: 
% The `babel` package, among other things, lets you determine what 
% language you are using in a given stretch of text, so that typesetting 
% will go well. Here we specify that mostly, we are speaking English:
\usepackage{polyglossia}
\setmainlanguage{english}


% Margins, etc:
% the `geometry` package makes for convenient adjusting of margins, which is what
% you asked about.  Of course it can do much more, even make coffee for you:
\usepackage{geometry}
\geometry{a4paper}

\usepackage{setspace}
% default lead is 1.216666
\setstretch{1.15}
% \showthe\baselineskip


% Activate to begin paragraphs with an empty line rather than an indent
\usepackage{parskip} 
% so if you just keep a copy of this template in the directory you are working in, you
% can adjust the margins by going into this file and messing with the margins.
% the syntax is very unforgiving, but permits 3cm and 2.5in and some other things.

% references

% for natbib
$if(natbib)$
  \usepackage[numbers]{natbib}
  \bibliographystyle{agsm}
  \renewcommand\harvardurl[1]{\textbf{URL:} \texttt{\textcolor{OldCyan}{#1}}}
$endif$
% for biblatex
$if(biblatex)$
  \usepackage{biblatex}
  % if there's some bib file, add it
  $if(biblio-files)$
    \bibliography{$biblio-files$}
  $endif$
$endif$


\usepackage{ctable}
\usepackage{float}
\usepackage[normalem]{ulem}
% typography settings
% default conf applied

% Open Sans, a beautiful fontface
\setmainfont[Mapping = tex-text, Color = Grey, BoldFont = {* Semibold}, BoldItalicFont = {* Semibold Italic}, ItalicFont = {* Italic}]{Open Sans} 
% \setmainfont[Mapping = tex-text, Color = Grey, BoldFont = {* Bold}, BoldItalicFont = {* Bold Italic}, ItalicFont = {* Italic}]{PT Sans}
% Droid Sans Mono matches Open Sans fairly well; both from Ascender
% sort of like Cambria Math; somehow matches a sans body text 
\setmathfont{Asana Math} % math font
\newfontfamily\sectfont
  [BoldFont={* Bold},
   Numbers={OldStyle,Proportional},
   Color = Grey
  ]
  {Bitter}

\newfontfamily\titlefont
  [BoldFont={Open Sans},
   Numbers={OldStyle,Proportional}]
  {Open Sans Light}

\usepackage{sectsty}
\allsectionsfont{\sectfont\textmd}


% Solarized Light
% \usepackage{color}
\usepackage{fancyvrb}
\DefineShortVerb[commandchars=\\\{\}]{\|}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{fontsize=\footnotesize,%
commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
% this is solarized light
\definecolor{shadecolor}{RGB}{253,246,227} % solarized@base3
\newenvironment{Shaded}{\vspace{\baselineskip}\begin{shaded}}{\end{shaded}\vspace{\baselineskip}}
% colored backgrd for verb
\let\oldverbatim=\verbatim
\let\endoldverbatim=\endverbatim
\renewenvironment{verbatim}[1]{%
  \vspace{\baselineskip}
  \scriptsize
  \par\setstretch{1}
  \begin{shaded}
  \begin{oldverbatim}{#1}%
}%
{%
  \end{oldverbatim}%
  \end{shaded}
  \vspace{\baselineskip}
}

\newcommand{\KeywordTok}[1]{\textbf{\textcolor{solarized@green}{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor{solarized@blue}{#1}}
\newcommand{\DecValTok}[1]{\textcolor{solarized@violet}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor{solarized@violet}{#1}}
\newcommand{\FloatTok}[1]{\textcolor{solarized@violet}{#1}}
\newcommand{\CharTok}[1]{\textcolor{solarized@cyan}{#1}}
\newcommand{\StringTok}[1]{\textcolor{solarized@cyan}{#1}}
\newcommand{\CommentTok}[1]{\textcolor{solarized@base1}{\textit{#1}}}
\newcommand{\OtherTok}[1]{\textcolor{solarized@base00}{#1}}
\newcommand{\AlertTok}[1]{\textcolor{solarized@yellow}{\textbf{#1}}}
\newcommand{\FunctionTok}[1]{\textcolor{solarized@blue}{#1}}
\newcommand{\RegionMarkerTok}[1]{\textcolor{solarized@base1}{#1}}
\newcommand{\ErrorTok}[1]{\textcolor{solarized@red}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{\textcolor{solarized@base00}{#1}}

% monospace also grey
% \setmonofont[Mapping=tex-ansi,Color=solarized@base00,Numbers=Lining,Ligatures=NoRequired]{PT Mono}
\setmonofont[Mapping=tex-ansi,Color=solarized@base00,Numbers=Lining,Ligatures=NoRequired]{Source Code Pro}

% color fixes
\makeatletter
\newcommand{\globalcolor}[1]{%
  \color{#1}\global\let\default@color\current@color
}
\makeatother
\AtBeginDocument{\globalcolor{Grey}}
\renewcommand{\textcolor}[2]{{\addfontfeature{Color=#1}#2}}

% allow to break lines more easily on tt text
% http://tex.stackexchange.com/questions/52850/temporarily-increase-the-limit-on-space-size
\let\OldTexttt\texttt
\renewcommand{\texttt}[1]{ \emergencystretch=2em \OldTexttt{#1} }
% maybe?
\setlength{\emergencystretch}{3em}  % prevent overfull lines



% $if(listings)$
% \usepackage{listings}
% % monospace also grey
% \setmonofont[Color=solarized@base00,Numbers=Lining,Ligatures=NoRequired]{Consolas}
% \usepackage{listings}
% % "define" Scala
% \lstdefinelanguage{scala}{
%   morekeywords={abstract,case,catch,class,def,%
%     do,else,extends,false,final,finally,%
%     for,if,implicit,import,match,mixin,%
%     new,null,object,override,package,%
%     private,protected,requires,return,sealed,%
%     super,this,throw,trait,true,try,%
%     type,val,var,while,with,yield},
%   otherkeywords={=>,<-,<\%,<:,>:,\#,@},
%   sensitive=true,
%   morecomment=[l]{//},
%   morecomment=[n]{/*}{*/},
%   morestring=[b]",
%   morestring=[b]',
%   morestring=[b]"""
% }

% % load default languages
% % \lstloadlanguages{scala, java, bash, xml}
% \newcommand{\fontcolor}[1]{\addfontfeature{Color=#1}}

% \lstset{ %
% % language=scala,
% showspaces=false,               % show spaces adding particular underscores
% showstringspaces=false,         % underline spaces within strings
% showtabs=false,
% columns=fullflexible,   % don't mess with spacing
% extendedchars=false,   % don't mess with unicode stuff
% tabsize=2,          % sets default tabsize to 2 spaces
% breaklines=true,        % sets automatic line breaking
% breakatwhitespace=false,    % sets if automatic breaks should only happen at whitespace
% lineskip={-0.5pt},
% belowskip=\baselineskip,
% aboveskip=\baselineskip,
% frameround=tttt, %
% framerule=0pt, %
% framextopmargin=\baselineskip, %
% framexbottommargin=\baselineskip, %
% frame=trlb, %
% rulecolor=\color{solarized@base3}, %
% backgroundcolor=\color{solarized@base3}, %
% basicstyle=\small\fontcolor{solarized@base00},       % the size of the fonts that are used for the code
% numberstyle=\fontcolor{solarized@base01}, %
% keywordstyle=\bfseries\fontcolor{solarized@green}, %
% stringstyle=\fontcolor{solarized@cyan}, %
% identifierstyle=\fontcolor{solarized@base00}, %
% commentstyle=\itshape\fontcolor{solarized@base1}, %
% emphstyle=\itshape\fontcolor{solarized@red} %
% }

% % \lstloadlanguages{scala, java, bash, xml}

% % monospace also grey
% \setmonofont[Color=solarized@base00,Numbers=Lining,Ligatures=NoRequired]{Consolas}
% color fixes
\makeatletter
\newcommand{\globalcolor}[1]{%
  \color{#1}\global\let\default@color\current@color
}
\makeatother

\AtBeginDocument{\globalcolor{Grey}}
\renewcommand{\textcolor}[2]{{\addfontfeature{Color=#1}#2}}
$endif$

% The default `plain` pagestyle just numbers the pages,
% whereas  
% \pagestyle{empty} 
% would give you no numbering.
% After one-million man-years of macro-composition, 
% there are also fancy pagestyles with much wilder options 
% for headers and footers, of course.

% Footnotes
% if you have code in your footnotes, the million macro march 
% kind of bumps into itself.
% Pandoc, having just rendered your text into LaTeX, 
% knows whether the 'variable' `verbatim-in-note` is True, and 
% If it is, it asks for a  LaTeX package that solves the dilemma:
$if(verbatim-in-note)$
\usepackage{fancyvrb}
$endif$

% Lists formatting: 
% note sure what 'fancy enums' are; something to do with lists, 
% as the further comment suggests: 
$if(fancy-enums)$
% -- Redefine labelwidth for lists; otherwise, the enumerate package will cause
% -- markers to extend beyond the left margin.
\makeatletter\AtBeginDocument{%
  \renewcommand{\@listi}
    {\setlength{\labelwidth}{4em}}
}\makeatother
\usepackage{enumerate}
$endif$




% Table formatting: 
% What if you make a table? -- Pandoc knows, of course, and 
% then declares that its  variable `table` is True and 
% imports a table package suitable to its pleasantly simple tables. 
% Needless to say infinitely   complicated tables are possible in 
% LaTeX with suitable packages. We are spared the temptation:
\usepackage{tabu}
\taburulecolor{Salmon-Dark}
\let\quoteOld\quote
\let\endquoteOld\endquote
\renewenvironment{quote}{\vspace{\baselineskip}\itshape\quoteOld\begin{tabu}{|[2pt]p{.9\textwidth}}}{\end{tabu}\endquoteOld\vspace{\baselineskip}}

% longtable needed by latest pandoc version
\usepackage{longtable}

\setupctable{
captionskip=0pt, framerule=0pt, nostar,
center, framesep=0pt, pos=tbp,
continued=(continued), maxwidth=0pt, super,
doinside={}, mincapwidth=0pt, table,
framebg=1 1 1, nonotespar, topcap,
framefg=.3 .1 .68, nosideways, width=0pt
}
% $if(tables)$
% \usepackage{array}

% % Continuing on the topic of tables ... (we havent reached `endif`). 
% % The commented out line below is in the default pandoc  latex.template.
% % Some unpleasantness with table formatting must be corrected.

% % -- This is needed because raggedright in table elements redefines \\:
% \newcommand{\PreserveBackslash}[1]{\let\temp=\\#1\let\\=\temp}
% \let\PBS=\PreserveBackslash

% $endif$


% Subscripts:
% Pandoc remembers whether you used subscripts, assigning True to 
% its `subscript` variable 
% It then needs to adopt a default with an incantation like this:
$if(subscript)$
\newcommand{\textsubscr}[1]{\ensuremath{_{\scriptsize\textrm{#1}}}}
$endif$

% math diagrams
\usepackage[all]{xy}


% Web-style links:

% markdown inclines us to use links, since our texts can be made into html. 
% Why not have clickable blue links even in 
% learned, scientific, religious, juridical, poetical and other suchlike texts? 
% Never mind that they have been proven to destroy the nervous system!

% First, what about the fact that links like http://example.com are 
% technically code and thus must not be broken across lines? 
% [breaklinks=true] to the rescue!

% Nowadays LaTeX can handle all of this with another half million macros:

\usepackage[breaklinks=true]{hyperref}
\hypersetup{
  setpagesize=false, % page size defined by xetex
  unicode=false, % unicode breaks when used with xetex
  xetex,
  pdfnewwindow,
  colorlinks,%
  citecolor=OldCyan,%
  filecolor=OldCyan,%
  linkcolor=OldCyan,%
  urlcolor=OldCyan,
  urlbordercolor=OldCyan
}
$if(url)$
\usepackage{url}
$endif$
\urlstyle{same}

\let\OldHref\href
\renewcommand{\href}[2]{\OldHref[pdfnewwindow]{#1}{{#2}}}

% ugly fix for link colors in xetex
\makeatletter
\def\HyColor@@@@UseColor#1\@nil{\addfontfeatures{Color=#1}}
\makeatother


% Images. 
% In ye olde LaTeX one could only import a limited range of image
% types, e.g. the forgotten .eps files.  Or else one simply drew the image with suitable
% commands and drawing packages.  Today we want to import .jpg files we make with 
% our smart phones or whatever:

$if(graphics)$
\usepackage{graphicx}
% -- We will generate all images so they have a width \maxwidth. This means
% -- that they will get their normal width if they fit onto the page, but
% -- are scaled down if they would overflow the margins.
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
\else\Gin@nat@width\fi}
\makeatother
\let\Oldincludegraphics\includegraphics
\renewcommand{\includegraphics}[1]{\Oldincludegraphics[width=\maxwidth]{#1}}
$endif$

% \usepackage{listings}


% Section numbering.  
% Here again is a variable you can specify on the commandline
% `markdown2pdf my.txt --number-sections --xetex --template=/wherever/this/is -o my.pdf`
$if(numbersections)$
$else$
\setcounter{secnumdepth}{3}
$endif$

% Footnotes: 
% Wait, didn't we already discuss the crisis of code in footnotes?  
% Evidently the order of unfolding of macros required that
% we import a package to deal with them earlier
% and issue a command it defines now. (Or maybe that's not the reason;
% very often the order does matter as the insane system of macro expansion
% must take place by stages.)
$if(verbatim-in-note)$
\VerbatimFootnotes % -- allows verbatim text in footnotes
$endif$

% Other stuff you specify on the command line:
% You can include stuff for the header from a file specified on the command line;
% I've never done this, but that stuff will go here:
$for(header-includes)$
$header-includes$
$endfor$

$if(title)$
  \title{$title$}
$else$
  \title{you need a title!}
$endif$

% page style!

% space between text and footer
% 
% footer height
\setlength{\footskip}{3\baselineskip}
\setlength{\headsep}{3\baselineskip}
\setlength{\skip\footins}{0cm}
% \setlength{\voffset}{-10pt}
\setlength{\topmargin}{0pt}
% \setlength{\textheight}{612pt}

\makeatletter
\let\Title\@title
\let\Author\@author
\makeatother

\usepackage{fancyhdr}
\pagestyle{fancy}

\renewcommand{\sectionmark}[1]{%
\markboth{#1}{}}
% \fancyheadoffset{0cm}
\renewcommand{\headrulewidth}{.5pt}
\renewcommand{\headrule}{\vbox to 0pt{\hbox
to\headwidth{\dotfill}\vss}}

\lhead{\Title}
% \chead{\titlefont {\color{Grey-Light}\leftmark}}
\chead{}
\rhead{\titlefont \thepage}

\lfoot{\titlefont {{\color{Salmon-Dark}oh}{\color{LightAmber-Dark}no}{\color{Grey}sequences}{\color{Salmon-Dark}!} }}
\cfoot{}
\rfoot{\titlefont {\color{Grey-Light} era7 bioinformatics R\&D group}}
% footer rule
\renewcommand{\footruleskip}{0.66\baselineskip}
\renewcommand{\footrulewidth}{.5pt}
\renewcommand{\footrule}{{\color{LightAmber-MatteLight}%
\vskip-\footruleskip\vskip-\footrulewidth
\hrule width\headwidth height\footrulewidth\vskip\footruleskip}}

\renewcommand{\footrule}{\vbox to 0pt{\hbox
to\headwidth{\color{Salmon}{\dotfill}}\vss}}


% Title, authors, date.
% If you specified title authors and date at the start of 
% your pandoc-markdown file, pandoc knows the 'values' of the
% variables: title authors date and fills them in.





% At last: 
% The document itself!:

% After filling in all these blanks above, or erasing them 
% where they are not needed, Pandoc has finished writing the 
% famous LaTeX *preamble* for your document.
% Now comes the all-important command \begin{document}
% which as you can see, will be paired with an \end{document} at the end.
% Pandoc knows whether you have a title, and has already
% specified what it is; if so, it demands that the title be rendered.  
% Pandoc knows whether you want a table of contents, you
% specify this on the command line.
% Then, after fiddling with alignments, there comes the real
% business: pandoc slaps its rendering of your text in the place of
% the variable `body`
% It then concludes the document it has been writing. 

\begin{document}


\begin{titlepage}

\begin{center}

  \begin{minipage}{.86\textwidth}\center\titlefont
    
    % {\large\titlefont
    %   \author{$for(author)$$author$$sep$\\$endfor$}
    %   $if(date)$
    %   \date{$date$}
    %   $endif$
    %   \title{$title$}
    % }
    \title{\huge {$title$}}

    {\flushleft\author{$for(author)$$author$$sep$ \and $endfor$}}
    \maketitle
  \end{minipage}

  \begin{minipage}{.33\textwidth}\center
  \vspace{2\baselineskip}
    {\Large\titlefont
      {{\color{Salmon-Dark}oh}{\color{LightAmber-Dark}no}{\color{Grey}sequences}{\color{Salmon-Dark}!}}
    }
  \end{minipage}

  

  \begin{minipage}{.33\textwidth}\color{Salmon}\center
    \dotfill\\[2\baselineskip]
  \end{minipage}

  \begin{minipage}{.33\textwidth}\center

    {\large\titlefont
      \href{http://era7bioinformatics.com}{{\bfseries era7} {\color{Grey-Light}bioinformatics}}
    }
  \end{minipage}



\end{center}

\end{titlepage}

$if(toc)$
% \setcounter{tocdepth}{$toc-depth$}
\tableofcontents
$endif$


$if(alignment)$
\begin{$alignment$}
$endif$

$body$



$if(alignment)$
\end{$alignment$}
$endif$

$if(natbib)$
  $if(biblio-files)$
    $if(biblio-title)$
      $if(book-class)$
        \renewcommand\bibname{$biblio-title$}
      $else$
        \renewcommand\refname{$biblio-title$}
      $endif$
    $endif$
    
    \bibliography{$biblio-files$}

  $endif$
$endif$

$if(biblatex)$
  \printbibliography$if(biblio-title)$[title=$biblio-title$]$endif$
$endif$



\end{document}